<ng-container *ngIf="(history$| async)?.length;  else empty">
  <mat-toolbar class="history-toolbar">
    <h2 class="title">Results</h2>
  </mat-toolbar>

  <div class="history-content">
    <table [dataSource]="history$" mat-table tabindex="0">

      <!-- Started Column -->
      <ng-container matColumnDef="started">
        <th *matHeaderCellDef mat-header-cell>Started</th>
        <td *matCellDef="let data" mat-cell>{{getFormattedDateString(data.started)}}</td>
      </ng-container>

      <!-- Duration Column -->
      <ng-container matColumnDef="duration">
        <th *matHeaderCellDef mat-header-cell>Duration</th>
        <td *matCellDef="let data" mat-cell>{{getDuration(data.started, data.finished)}}</td>
      </ng-container>

      <!-- Device Column -->
      <ng-container matColumnDef="device">
        <th *matHeaderCellDef mat-header-cell>Device</th>
        <td *matCellDef="let data" mat-cell> {{data.device.manufacturer}} {{data.device.model}} </td>
      </ng-container>

      <!-- Firmware Column -->
      <ng-container matColumnDef="firmware">
        <th *matHeaderCellDef mat-header-cell>Firmware</th>
        <td *matCellDef="let data" mat-cell> {{data.device.firmware}} </td>
      </ng-container>

      <!-- Result Column -->
      <ng-container matColumnDef="result">
        <th *matHeaderCellDef mat-header-cell>Result</th>
        <td *matCellDef="let data" mat-cell>
          <span class="table-cell-result-text" [ngClass]="getResultClass(data.status)">
            {{data.status}}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="report">
        <th *matHeaderCellDef mat-header-cell>Download</th>
        <td *matCellDef="let data" mat-cell class="table-cell-report">
          <app-download-report [data]="data">
            <mat-icon class="download-report-icon" fontSet="material-icons-outlined">
              file_download
            </mat-icon>
          </app-download-report>
        </td>
      </ng-container>

      <tr *matHeaderRowDef="displayedColumns" mat-header-row></tr>
      <tr *matRowDef="let row; columns: displayedColumns;" mat-row></tr>
    </table>
  </div>
</ng-container>

<ng-template #empty>
  <div class="results-content-empty">
    <div class="results-content-empty-message">
      <span class="results-content-empty-message-header">Sorry, there are no reports yet!</span>
      <span class="results-content-empty-message-main">Reports will automatically generate following a test run completion.</span>
    </div>
  </div>
</ng-template>
