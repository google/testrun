<div class="side-add-button-container">
  <button
    class="side-add-button"
    mat-fab
    (click)="menuTrigger.openMenu()"
    aria-label="Actions">
    <mat-icon>add</mat-icon>
  </button>
  <div
    class="side-add-menu-trigger"
    #menuTrigger="matMenuTrigger"
    [matMenuTriggerFor]="menu"></div>
</div>

<mat-menu
  #menu="matMenu"
  class="side-add-menu"
  backdropClass="side-add-menu-backdrop">
  <div class="side-add-menu-triangle">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="12"
      height="20"
      viewBox="0 0 12 20"
      fill="none">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M1.9923 13.3282C-0.382636 11.7449 -0.382632 8.25509 1.9923 6.6718L12 0L12 20L1.9923 13.3282Z"
        fill="white" />
    </svg>
  </div>
  <ng-container
    *ngFor="let item of menuItems()"
    [ngTemplateOutlet]="menuItem"
    [ngTemplateOutletContext]="{
      svgIcon: item.svgIcon,
      icon: item.icon,
      label: item.label,
      description: item.description,
      onClick: item.onClick,
      disabled$: item.disabled$,
    }"></ng-container>
</mat-menu>

<ng-template
  #menuItem
  let-icon="icon"
  let-svgIcon="svgIcon"
  let-label="label"
  let-description="description"
  let-onClick="onClick"
  let-disabled$="disabled$">
  <button
    mat-menu-item
    class="side-add-menu-button"
    [class.with-description]="description !== null"
    (click)="onClick()"
    [disabled]="disabled$ | async">
    <mat-icon *ngIf="svgIcon" svgIcon="{{ svgIcon }}"></mat-icon>
    <mat-icon
      *ngIf="icon"
      class="material-symbols-outlined side-add-menu-button-icon"
      >{{ icon }}</mat-icon
    >
    <div class="side-add-menu-button-label">{{ label }}</div>
    <div *ngIf="description" class="side-add-menu-button-description">
      {{ description }}
    </div>
  </button>
</ng-template>
